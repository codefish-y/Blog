---
title: Hexo|Butterfly æ·»åŠ Walineè¯„è®ºç³»ç»Ÿ
author: å°é±¼
cover: /image/waline_comment/image-20221101134935755.png
date: 2022-11-01 13:42:56
tags: [comment,waline,ä¸»é¢˜ç¾åŒ–,è¯„è®ºç³»ç»Ÿ]
categories: [ä¸»é¢˜ç¾åŒ–]
---

[Waline](https://waline.js.org/)æ˜¯Valineçš„å‡çº§ç‰ˆï¼ŒåŠ å…¥äº†åç«¯ç®¡ç†ç³»ç»Ÿã€‚å¯åœ¨åå°å¯¹è¯„è®ºè¿›è¡Œç¼–è¾‘ï¼Œåˆ é™¤ï¼Œå›å¤ï¼Œç½®é¡¶ç­‰æ“ä½œã€‚

![image-20221101135330958](../image/waline_comment/image-20221101135330958.png)

## éƒ¨ç½²è¦æ±‚

- LeanCloud
- Vercel
- GitHub
- ä¸€ä¸ªåŸŸå

## LeanCloud

### ç¯å¢ƒå‡†å¤‡

æ³¨å†ŒLeanCloudå›½é™…ç‰ˆ(ä¸€å®šè¦æ˜¯å›½é™…ç‰ˆï¼Œå¦åˆ™éœ€è¦å¦å¤–å‡†å¤‡å¤‡æ¡ˆçš„åŸŸåå’ŒæœåŠ¡å™¨)

LeanCloudåœ°å€ï¼šhttps://console.leancloud.app/

![69d888dbe3e9a8c417498e40f8fc6563](../image/waline_comment/69d888dbe3e9a8c417498e40f8fc6563.png)

æ³¨å†Œå®Œæˆä¹‹åï¼Œå‰å¾€é‚®ç®±éªŒè¯ã€‚![a423e39bb71de190cc873e7f5ec5b59a](../image/waline_comment/a423e39bb71de190cc873e7f5ec5b59a-7282499.png)

![a423e39bb71de190cc873e7f5ec5b59a](../image/waline_comment/9cc8f71d7d7581afe83b1c0683a7629f.png)

éªŒè¯æˆåŠŸååˆ›å»ºä¸€ä¸ªåº”ç”¨ã€‚![2721475878d8185416a57e601435822c](../image/waline_comment/2721475878d8185416a57e601435822c.png)

![bd043942d7cd9a4a5c4664b025b342ad](../image/waline_comment/bd043942d7cd9a4a5c4664b025b342ad.png)

è¿›å…¥`è®¾ç½®-åº”ç”¨å‡­è¯`ï¼Œè®°ä¸‹è‡ªå·±çš„`AppID-AppKey-MasterKey`ã€‚

![95b5ae65eef91832923f2ca41781e065](../image/waline_comment/95b5ae65eef91832923f2ca41781e065.png)

LeanCloudçš„è®¾ç½®å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥è¦æ¢ä¸€ä¸ªåœ°æ–¹ã€‚

## Vercel

### å¼€å§‹éƒ¨ç½²

åœ¨Vercelè¿›è¡Œéƒ¨ç½²ï¼š[ç‚¹æˆ‘éƒ¨ç½²](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample)

![71d22876ad1e9540acfcd815968148fa](../image/waline_comment/71d22876ad1e9540acfcd815968148fa.png)

ä½¿ç”¨GitHubç™»é™†ï¼Œå°†Vercelå®‰è£…åˆ°GitHubä»“åº“ã€‚

![d8181e70e2f7924a20511af9921b9780](../image/waline_comment/d8181e70e2f7924a20511af9921b9780.png)

åˆ›å»ºä¸€ä¸ªä»“åº“ï¼š

![6db50e08193de8654bed4abf9858b78e](../image/waline_comment/6db50e08193de8654bed4abf9858b78e.png)

ç­‰å¾…ä¸€ä¼šå„¿ï¼Œå‡ºç°æ»¡å±çš„çƒŸèŠ±æç¤ºä½ éƒ¨ç½²æˆåŠŸäº†ï¼š

![bb02341e110bfd60a30f0e6ac85fbe1c](../image/waline_comment/bb02341e110bfd60a30f0e6ac85fbe1c.png)

Continue to Dashboredï¼Œå»ä»ªè¡¨ç›˜`Settings - Environment Variables`,è¿›å…¥ç¯å¢ƒå˜é‡é…ç½®é¡µã€‚

å¹¶é…ç½®ä¸‰ä¸ªç¯å¢ƒå˜é‡ `LEAN_ID`, `LEAN_KEY` å’Œ `LEAN_MASTER_KEY` ã€‚å®ƒä»¬çš„å€¼åˆ†åˆ«å¯¹åº”ä¸Šä¸€æ­¥åœ¨ LeanCloud ä¸­è·å¾—çš„ `AppID`, `AppKey`, `MasterKey`ã€‚

![28820abf39ed6026aa2b287da6d23934](../image/waline_comment/28820abf39ed6026aa2b287da6d23934.png)

å¡«å†™å®Œæˆåå¦‚å›¾æ‰€ç¤ºï¼š

![2c3ce7c7bf4f53795b7e3f9dc74fcb2e](../image/waline_comment/2c3ce7c7bf4f53795b7e3f9dc74fcb2e.png)

ç¯å¢ƒå˜é‡é…ç½®å®Œæˆä¹‹åç‚¹å‡»é¡¶éƒ¨çš„ `Deployments`ï¼Œç„¶å`Redeploy`é‡æ–°éƒ¨ç½²ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚

![e280db1d0f92daac7ab09d6e42d9afd9](../image/waline_comment/e280db1d0f92daac7ab09d6e42d9afd9.png)

éƒ¨ç½²å®Œæˆåç‚¹å‡»`Visit`å³å¯ç”¨vercelæä¾›çš„åŸŸåè®¿é—®è¯„è®ºç³»ç»Ÿï¼š

![6470069e5ecea3b626021057bea5be47](../image/waline_comment/6470069e5ecea3b626021057bea5be47.png)

### æ›´æ¢åŸŸå

ä½†æ˜¯ç”±äºVercelçš„dnsåœ¨å›½å†…å·²ç»è¢«æ±¡æŸ“ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯„è®ºç³»ç»Ÿæ¢æˆè‡ªå·±çš„åŸŸåï¼›

- ç‚¹å‡»é¡¶éƒ¨çš„ `Settings` - `Domains` è¿›å…¥åŸŸåé…ç½®é¡µ
- è¾“å…¥éœ€è¦ç»‘å®šçš„åŸŸåå¹¶ç‚¹å‡» `Add`

![139cae3cf16b85d286caf08dbb124956](../image/waline_comment/139cae3cf16b85d286caf08dbb124956.png)

![411b6af824300d5bb1242f15323ac32b](../image/waline_comment/411b6af824300d5bb1242f15323ac32b.png)

åœ¨åŸŸåæœåŠ¡å™¨å•†å¤„æ·»åŠ æ–°çš„ `CNAME` è§£æè®°å½•

| Type  | Name                       | Value                |
| ----- | -------------------------- | -------------------- |
| CNAME | @/waline(æ ¹æ®å®é™…æƒ…å†µå¡«å†™) | cname.vercel-dns.com |

![73ea53d15e9da927cc32d9600f212789](../image/waline_comment/73ea53d15e9da927cc32d9600f212789.png)

ç­‰å¾…ç”Ÿæ•ˆï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®äº†ğŸ‰

- è¯„è®ºç³»ç»Ÿï¼šwaline.yourdomain.com
- è¯„è®ºç®¡ç†ï¼šwaline.yourdomain.com/ui

### CloudFlareè®¾ç½®

å¦‚æœæç¤ºç½‘ç«™é‡å®šå‘æ¬¡æ•°è¿‡å¤šï¼Œæ— æ³•è®¿é—®ï¼Œå°†CloudFlareçš„sslè®¾ç½®ä¸ºä¸¥æ ¼æ¨¡å¼å³å¯ã€‚

![image-20221102094744076](../image/waline_comment/image-20221102094744076.png)

![2bba4890299b973ae09c2080045eba0e](../image/waline_comment/b61064e19c973e1ef87dc44619ba4e3a.png)

### æ³¨å†Œä¸ºç®¡ç†å‘˜

é»˜è®¤ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¸ºç®¡ç†å‘˜ç”¨æˆ·ï¼šwaline.yourdomain.com/ui/register

![image-20221101143120596](../image/waline_comment/image-20221101143120596.png)

![image-20221101144000649](../image/waline_comment/image-20221101144000649.png)

## ç«™ç‚¹é…ç½®

åœ¨ç«™ç‚¹æ ¹ç›®å½•å®‰è£…Walineï¼›`npm install @waline/hexo-next --save`

ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š`_config.butterfly.yml`

```yaml
comments:
  use: Waline
  text: true # Display the comment name next to the button
  # lazyload: The comment system will be load when comment element enters the browser's viewport.
  # If you set it to true, the comment count will be invalid
  lazyload: false
  count: false # Display comment count in post's top_img
  card_post_count: false # Display comment count in Home Page
```

å¾€ä¸‹æ‰¾åˆ°Walineé…ç½®ï¼š

```yaml
waline:
  serverURL: waline.yourdomain.com    # å¡«å…¥åˆšåˆšå¾—åˆ°çš„åç«¯ URLï¼ˆå¿…å¡«,æ ¹æ®å®é™…æƒ…å†µå¡«å†™ä½ è‡ªå·±çš„åŸŸåï¼‰
  option:
    locale: {
      nick: 'æ˜µç§°',
      mail: 'é‚®ç®±',
      link: 'ä½ çš„ç½‘ç«™',
      placeholder: 'ä½ è¿™ä¹ˆå¯çˆ±ä¸€å®šä¼šæ–‡æ˜è¯„è®ºçš„å§ï½(å¡«å†™é‚®ç®±å¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥å“¦)',
      requiredMeta: [],
      mailError: 'è¯·å¡«å†™æ­£ç¡®çš„é‚®ä»¶åœ°å€',
      sofa: 'å¿«æ¥æŠ¢å æ²™å‘~',
      level0: 'é”»ä½“',
      level1: 'ç»ƒæ°”',
      level2: 'ç­‘åŸº',
      level3: 'é‡‘ä¸¹',
      level4: 'å…ƒå©´',
      level5: 'åŒ–ç¥',
      }
    emoji: [
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji',
        'https://cdn.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili',
        ]
```



`hexo cl && hexo g && hexo d`éƒ¨ç½²

![c022eb9a4f50feb8e281dd9a416d0470](../image/waline_comment/c022eb9a4f50feb8e281dd9a416d0470.png)
